<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>DiziLoop • Yükle</title>
  <style>
    body{font-family:system-ui,Arial;background:#0b1022;color:#eaf2ff;padding:16px}
    input,button{width:100%;padding:12px;margin:8px 0;border-radius:10px;border:1px solid #1a2a4a;background:#0f1630;color:#eaf2ff}
    button{background:#22c55e;color:#06260f;font-weight:800}
  </style>
</head>
<body>
  <h2>Dizi Yükle (Link ile)</h2>
  <input id="title" placeholder="Dizi adı"/>
  <input id="videoUrl" placeholder="Video linki (Drive/Dropbox/YouTube)"/>
  <input id="coverUrl" placeholder="Kapak görseli linki (jpg/png)"/>
  <button id="send">Onaya Gönder</button>
  <p id="msg"></p>

  <script type="module">
    import "./firebase.js";
    const { collection, addDoc, serverTimestamp } = window._fs;

    document.getElementById("send").onclick = async () => {
      const title = document.getElementById("title").value.trim();
      const videoUrl = document.getElementById("videoUrl").value.trim();
      const coverUrl = document.getElementById("coverUrl").value.trim();
      const msg = document.getElementById("msg");

      if(!title || !videoUrl || !coverUrl){
        msg.textContent = "Tüm alanları doldur.";
        return;
      }

      await addDoc(collection(window._db, "submissions"), {
        title, videoUrl, coverUrl, status: "pending", createdAt: serverTimestamp()
      });

      msg.textContent = "Gönderildi. Onay bekliyor.";
      document.getElementById("title").value = "";
      document.getElementById("videoUrl").value = "";
      document.getElementById("coverUrl").value = "";
    };
  </script>
</body>
</html>
